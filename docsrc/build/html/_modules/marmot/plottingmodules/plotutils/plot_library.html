
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>marmot.plottingmodules.plotutils.plot_library &#8212; Marmot 0.11.0 documentation</title>
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../../../../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../../../../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/css/custom.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="None">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../../../../index.html">
  
  
  
  
  
    <p class="title logo__title">Marmot 0.11.0 documentation</p>
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../../get-started/index.html">
  Getting Started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../../how-to/index.html">
  How-to Guides
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../../plot-gallery/index.html">
  Plotting Examples Gallery
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../../references/input-files/files.html">
  Input File Reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../../references/code/modules.html">
  Code Reference
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/NREL/Marmot" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <h1>Source code for marmot.plottingmodules.plotutils.plot_library</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;Methods for creating plot figure and axs objects</span>
<span class="sd">and a library of regularly used plot types.</span>

<span class="sd">@author: Daniel Levie</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">textwrap</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.dates</span> <span class="k">as</span> <span class="nn">mdates</span>
<span class="kn">import</span> <span class="nn">matplotlib.ticker</span> <span class="k">as</span> <span class="nn">mtick</span>
<span class="kn">from</span> <span class="nn">matplotlib.axes</span> <span class="kn">import</span> <span class="n">Axes</span>
<span class="kn">from</span> <span class="nn">matplotlib.figure</span> <span class="kn">import</span> <span class="n">Figure</span>
<span class="kn">from</span> <span class="nn">matplotlib.patches</span> <span class="kn">import</span> <span class="n">Patch</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Union</span>

<span class="kn">import</span> <span class="nn">marmot.utils.mconfig</span> <span class="k">as</span> <span class="nn">mconfig</span>


<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;plotter.&quot;</span> <span class="o">+</span> <span class="vm">__name__</span><span class="p">)</span>

<span class="n">font_settings</span> <span class="o">=</span> <span class="n">mconfig</span><span class="o">.</span><span class="n">parser</span><span class="p">(</span><span class="s2">&quot;font_settings&quot;</span><span class="p">)</span>
<span class="n">text_position</span> <span class="o">=</span> <span class="n">mconfig</span><span class="o">.</span><span class="n">parser</span><span class="p">(</span><span class="s2">&quot;text_position&quot;</span><span class="p">)</span>
<span class="n">axes_options</span> <span class="o">=</span> <span class="n">mconfig</span><span class="o">.</span><span class="n">parser</span><span class="p">(</span><span class="s2">&quot;axes_options&quot;</span><span class="p">)</span>


<div class="viewcode-block" id="SetupSubplot"><a class="viewcode-back" href="../../../../references/code/_autosummary/marmot.plottingmodules.plotutils.plot_library.SetupSubplot.html#marmot.plottingmodules.plotutils.plot_library.SetupSubplot">[docs]</a><span class="k">class</span> <span class="nc">SetupSubplot</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Sets up the main figure and subplots for use in Marmot</span>
<span class="sd">    and expands the functionality of matplotlib by adding further</span>
<span class="sd">    methods to quickly build plots.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">nrows</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">ncols</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">figsize</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">mconfig</span><span class="o">.</span><span class="n">parser</span><span class="p">(</span><span class="s2">&quot;figure_size&quot;</span><span class="p">,</span> <span class="s2">&quot;xdimension&quot;</span><span class="p">),</span>
            <span class="n">mconfig</span><span class="o">.</span><span class="n">parser</span><span class="p">(</span><span class="s2">&quot;figure_size&quot;</span><span class="p">,</span> <span class="s2">&quot;ydimension&quot;</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="n">sharey</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">squeeze</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">ravel_axs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Defines the dimensions (nrows, ncols) of a figure and its subplots.</span>
<span class="sd">        Builds on top of matplotlib.pyplot.subplots and preserves all</span>
<span class="sd">        functionality of that function.</span>

<span class="sd">        All arguments are optional and by default calling SetupSubplot()</span>
<span class="sd">        or PlotLibrary() which inherits SetupSubplot, will create a</span>
<span class="sd">        1x1 figure with a figsize defined in the config.yml file.</span>
<span class="sd">        The following are some common values to pass when creating various</span>
<span class="sd">        plots.</span>

<span class="sd">        - 1x1 figure: SetupSubplot()</span>
<span class="sd">        - 1xN figure: SetupSubplot(nrows=1, ncols=N, sharey=True)</span>
<span class="sd">        - MxN figure: SetupSubplot(nrows=M, ncols=N, sharey=True, squeeze=False, ravel_axs=True)</span>

<span class="sd">        Plotting defaults are also set in this class, which are defined</span>
<span class="sd">        in the config.yml file.</span>

<span class="sd">        Args:</span>
<span class="sd">            nrows (int, optional): Number of rows of the subplot grid.</span>
<span class="sd">                Defaults to 1.</span>
<span class="sd">            ncols (int, optional): Number of columns of the subplot grid.</span>
<span class="sd">                Defaults to 1.</span>
<span class="sd">            figsize (Tuple[int, int], optional): The x,y dimension of each</span>
<span class="sd">                subplot.</span>
<span class="sd">                Defaults set in config.yml</span>
<span class="sd">            sharey (bool, optional): share the y-axis across all subplots.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            squeeze (bool, optional): If True, extra dimensions are squeezed</span>
<span class="sd">                out from the returned axs objects if 1x1 figure or 1xN figure.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            ravel_axs (bool, optional): If True the returned axs object is a</span>
<span class="sd">                1D numpy object array of Axes objects. This can be used to</span>
<span class="sd">                convert MxN figure axs objects to 1D.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            **kwargs</span>
<span class="sd">                These parameters will be passed to matplotlib.pyplot.subplots function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Set plot defaults</span>
        <span class="n">mpl</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&quot;xtick&quot;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="n">font_settings</span><span class="p">[</span><span class="s2">&quot;xtick_size&quot;</span><span class="p">])</span>
        <span class="n">mpl</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&quot;ytick&quot;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="n">font_settings</span><span class="p">[</span><span class="s2">&quot;ytick_size&quot;</span><span class="p">])</span>
        <span class="n">mpl</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span>
            <span class="s2">&quot;legend&quot;</span><span class="p">,</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="n">font_settings</span><span class="p">[</span><span class="s2">&quot;legend_size&quot;</span><span class="p">],</span>
            <span class="n">frameon</span><span class="o">=</span><span class="n">axes_options</span><span class="p">[</span><span class="s2">&quot;show_legend_frame&quot;</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="n">mpl</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&quot;font&quot;</span><span class="p">,</span> <span class="n">family</span><span class="o">=</span><span class="n">font_settings</span><span class="p">[</span><span class="s2">&quot;font_family&quot;</span><span class="p">])</span>
        <span class="n">mpl</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&quot;figure&quot;</span><span class="p">,</span> <span class="n">max_open_warning</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">mpl</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span>
            <span class="s2">&quot;axes&quot;</span><span class="p">,</span>
            <span class="n">labelsize</span><span class="o">=</span><span class="n">font_settings</span><span class="p">[</span><span class="s2">&quot;axes_label_size&quot;</span><span class="p">],</span>
            <span class="n">titlesize</span><span class="o">=</span><span class="n">font_settings</span><span class="p">[</span><span class="s2">&quot;title_size&quot;</span><span class="p">],</span>
            <span class="n">titlepad</span><span class="o">=</span><span class="n">text_position</span><span class="p">[</span><span class="s2">&quot;title_height&quot;</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="n">mpl</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span>
            <span class="s2">&quot;axes.spines&quot;</span><span class="p">,</span>
            <span class="n">top</span><span class="o">=</span><span class="ow">not</span> <span class="p">(</span><span class="n">axes_options</span><span class="p">[</span><span class="s2">&quot;hide_top_spine&quot;</span><span class="p">]),</span>
            <span class="n">bottom</span><span class="o">=</span><span class="ow">not</span> <span class="p">(</span><span class="n">axes_options</span><span class="p">[</span><span class="s2">&quot;hide_bottom_spine&quot;</span><span class="p">]),</span>
            <span class="n">left</span><span class="o">=</span><span class="ow">not</span> <span class="p">(</span><span class="n">axes_options</span><span class="p">[</span><span class="s2">&quot;hide_left_spine&quot;</span><span class="p">]),</span>
            <span class="n">right</span><span class="o">=</span><span class="ow">not</span> <span class="p">(</span><span class="n">axes_options</span><span class="p">[</span><span class="s2">&quot;hide_right_spine&quot;</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="n">mpl</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&quot;xtick.major&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">axes_options</span><span class="p">[</span><span class="s2">&quot;major_x_tick_length&quot;</span><span class="p">],</span> <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">mpl</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&quot;ytick.major&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">axes_options</span><span class="p">[</span><span class="s2">&quot;major_y_tick_length&quot;</span><span class="p">],</span> <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">x</span> <span class="o">=</span> <span class="n">figsize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">figsize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span>
            <span class="n">nrows</span><span class="p">,</span>
            <span class="n">ncols</span><span class="p">,</span>
            <span class="n">figsize</span><span class="o">=</span><span class="p">((</span><span class="n">x</span> <span class="o">*</span> <span class="n">ncols</span><span class="p">),</span> <span class="p">(</span><span class="n">y</span> <span class="o">*</span> <span class="n">nrows</span><span class="p">)),</span>
            <span class="n">sharey</span><span class="o">=</span><span class="n">sharey</span><span class="p">,</span>
            <span class="n">squeeze</span><span class="o">=</span><span class="n">squeeze</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">ravel_axs</span><span class="p">:</span>
            <span class="n">axs</span> <span class="o">=</span> <span class="n">axs</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="p">:</span> <span class="n">Figure</span> <span class="o">=</span> <span class="n">fig</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axs</span><span class="p">:</span> <span class="n">Axes</span> <span class="o">=</span> <span class="n">axs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exax</span><span class="p">:</span> <span class="n">Axes</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span>
            <span class="n">labelcolor</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_check_if_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sub_pos</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axs</span><span class="p">,</span> <span class="n">Axes</span><span class="p">):</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axs</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axs</span><span class="p">[</span><span class="n">sub_pos</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">ax</span>

<div class="viewcode-block" id="SetupSubplot.get_figure"><a class="viewcode-back" href="../../../../references/code/_autosummary/marmot.plottingmodules.plotutils.plot_library.SetupSubplot.html#marmot.plottingmodules.plotutils.plot_library.SetupSubplot.get_figure">[docs]</a>    <span class="k">def</span> <span class="nf">get_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Figure</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="n">Axes</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Axes</span><span class="p">]]]:</span>
        <span class="sd">&quot;&quot;&quot;Returns the matplotlib figure and Axes objects.</span>

<span class="sd">        axes can be either a single Axes object or an array of</span>
<span class="sd">        Axes objects depending on the figure dimensions defined.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Tuple[Figure, Union[Axes, List[Axes]]]:</span>
<span class="sd">            matplotlib figure and axes objects</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">axs</span></div>

<div class="viewcode-block" id="SetupSubplot.add_legend"><a class="viewcode-back" href="../../../../references/code/_autosummary/marmot.plottingmodules.plotutils.plot_library.SetupSubplot.html#marmot.plottingmodules.plotutils.plot_library.SetupSubplot.add_legend">[docs]</a>    <span class="k">def</span> <span class="nf">add_legend</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">handles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">labels</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">loc</span><span class="o">=</span><span class="n">mconfig</span><span class="o">.</span><span class="n">parser</span><span class="p">(</span><span class="s2">&quot;axes_options&quot;</span><span class="p">,</span> <span class="s2">&quot;legend_position&quot;</span><span class="p">),</span>
        <span class="n">ncol</span><span class="o">=</span><span class="n">mconfig</span><span class="o">.</span><span class="n">parser</span><span class="p">(</span><span class="s2">&quot;axes_options&quot;</span><span class="p">,</span> <span class="s2">&quot;legend_columns&quot;</span><span class="p">),</span>
        <span class="n">reverse_legend</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">sort_by</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Adds a legend to the desired location on the figure.</span>

<span class="sd">        Wrapper around matplotlib.axes.Axes.legend</span>

<span class="sd">        The location and number of columns to create can be set</span>
<span class="sd">        through the config.yml file.</span>
<span class="sd">        The available default options are:</span>

<span class="sd">        - &#39;lower right&#39;</span>
<span class="sd">        - &#39;center right&#39;</span>
<span class="sd">        - &#39;upper right&#39;</span>
<span class="sd">        - &#39;upper center&#39;</span>
<span class="sd">        - &#39;lower center&#39;</span>
<span class="sd">        - &#39;lower left&#39;</span>
<span class="sd">        - &#39;center left&#39;</span>
<span class="sd">        - &#39;upper left&#39;</span>

<span class="sd">        The default options will place the legend outside the main figure</span>
<span class="sd">        subplots to avoid any overlaps of elements. Custom placement is still</span>
<span class="sd">        possible through the loc and bbox_to_anchor arguments but is not advised</span>
<span class="sd">        as this will hard code the placement.</span>

<span class="sd">        Passing handles and labels is not required as these are obtained from</span>
<span class="sd">        the axs objects. Any duplicate label and their handle will be removed.</span>

<span class="sd">        Sorting of legend is advised when plotting multiple subplots as original</span>
<span class="sd">        order cannot be guaranteed. This can be done by passing a list to the</span>
<span class="sd">        sort_by argument, values will then be sorted by the order they appear in</span>
<span class="sd">        the list.</span>

<span class="sd">        Args:</span>
<span class="sd">            handles (Artists sequence, optional): A list of Artists (lines, patches) to be</span>
<span class="sd">                added to the legend. Use this together with labels, if you need full</span>
<span class="sd">                control on what is shown in the legend and the automatic mechanism</span>
<span class="sd">                described above is not sufficient.</span>
<span class="sd">                The length of handles and labels should be the same in this case.</span>
<span class="sd">                If they are not, they are truncated to the smaller length.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            labels (List[str], optional): A list of labels to show next to the artists.</span>
<span class="sd">                Use this together with handles, if you need full control on what is shown</span>
<span class="sd">                in the legend and the automatic mechanism described above is not sufficient.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            loc (str or pair of floats, optional): The location of the legend.</span>
<span class="sd">                Defaults set in config.yml.</span>
<span class="sd">            ncol (int, optional):The number of columns that the legend has.</span>
<span class="sd">                Defaults set in config.yml.</span>
<span class="sd">            reverse_legend (bool, optional): Revereses the legend order.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            sort_by (list, optional): A list to sort the legend by, list can contain more or</span>
<span class="sd">                less entries than the legend, entries with no matches are not sorted and added</span>
<span class="sd">                to end of legend.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            bbox_to_anchor (2-tuple, or 4-tuple of floats, optional): Box that is used</span>
<span class="sd">                to position the legend in conjunction with loc. This argument allows arbitrary</span>
<span class="sd">                placement of the legend.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            **kwargs</span>
<span class="sd">                These parameters will be passed to matplotlib.axes.Axes.legend function.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">loc_anchor</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;lower right&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;lower left&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)),</span>
            <span class="s2">&quot;center right&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;center left&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)),</span>
            <span class="s2">&quot;upper right&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)),</span>
            <span class="s2">&quot;upper center&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;lower center&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.25</span><span class="p">)),</span>
            <span class="s2">&quot;lower center&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;upper center&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.25</span><span class="p">)),</span>
            <span class="s2">&quot;lower left&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;lower right&quot;</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)),</span>
            <span class="s2">&quot;center left&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;center right&quot;</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)),</span>
            <span class="s2">&quot;upper left&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;upper right&quot;</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)),</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">handles</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">labels</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axs</span><span class="p">,</span> <span class="n">Axes</span><span class="p">):</span>
                <span class="n">handles_list</span><span class="p">,</span> <span class="n">labels_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axs</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">handles_list</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">labels_list</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">axs</span><span class="o">.</span><span class="n">ravel</span><span class="p">():</span>
                    <span class="n">h</span><span class="p">,</span> <span class="n">l</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()</span>
                    <span class="n">handles_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
                    <span class="n">labels_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>

            <span class="c1"># Ensure there are unique labels and handle pairs</span>
            <span class="n">labels_handles</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">labels_list</span><span class="p">,</span> <span class="n">handles_list</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">sort_by</span><span class="p">:</span>
                <span class="n">sorted_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">sort_by</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
                <span class="n">extra_values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">labels_handles</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">-</span> <span class="n">sorted_list</span><span class="p">)</span>
                <span class="n">sorted_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">extra_values</span><span class="p">)</span>
                <span class="n">labels_handles</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
                    <span class="nb">sorted</span><span class="p">(</span>
                        <span class="n">labels_handles</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span>
                        <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">pair</span><span class="p">:</span> <span class="n">sorted_list</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                    <span class="p">)</span>
                <span class="p">)</span>

            <span class="n">labels</span> <span class="o">=</span> <span class="n">labels_handles</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="n">handles</span> <span class="o">=</span> <span class="n">labels_handles</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">reverse_legend</span><span class="p">:</span>
            <span class="n">handles</span> <span class="o">=</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">handles</span><span class="p">))</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">labels</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">loc</span> <span class="ow">in</span> <span class="n">loc_anchor</span><span class="p">:</span>
            <span class="n">new_loc</span><span class="p">,</span> <span class="n">bbox_to_anchor</span> <span class="o">=</span> <span class="n">loc_anchor</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">bbox_to_anchor</span> <span class="o">=</span> <span class="n">bbox_to_anchor</span>
            <span class="n">new_loc</span> <span class="o">=</span> <span class="n">loc</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">exax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span>
            <span class="n">handles</span><span class="p">,</span>
            <span class="n">labels</span><span class="p">,</span>
            <span class="n">loc</span><span class="o">=</span><span class="n">new_loc</span><span class="p">,</span>
            <span class="n">ncol</span><span class="o">=</span><span class="n">ncol</span><span class="p">,</span>
            <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="n">bbox_to_anchor</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="SetupSubplot.add_property_annotation"><a class="viewcode-back" href="../../../../references/code/_autosummary/marmot.plottingmodules.plotutils.plot_library.SetupSubplot.html#marmot.plottingmodules.plotutils.plot_library.SetupSubplot.add_property_annotation">[docs]</a>    <span class="k">def</span> <span class="nf">add_property_annotation</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
        <span class="n">prop</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">sub_pos</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">curtailment_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Curtailment&quot;</span><span class="p">,</span>
        <span class="n">energy_unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;MW&quot;</span><span class="p">,</span>
        <span class="n">re_gen_cat</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">gen_cols</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Adds a property annotation to the subplot.</span>

<span class="sd">        .. versionadded:: 0.10.0</span>
<span class="sd">        </span>
<span class="sd">        The current supported properties are:</span>

<span class="sd">        - Peak Demand</span>
<span class="sd">        - Min Net Load</span>
<span class="sd">        - Peak RE</span>
<span class="sd">        - Peak Unserved Energy</span>
<span class="sd">        - Peak Curtailment</span>

<span class="sd">        Based on the property selected this method will locate the timestamp</span>
<span class="sd">        and corresponding value of the property. The value and an arrow pointing</span>
<span class="sd">        to the location of the property will be annotated.</span>

<span class="sd">        Args:</span>
<span class="sd">            df (pd.DataFrame): Dataframe with datetime index</span>
<span class="sd">            prop (str): property</span>
<span class="sd">            sub_pos (Union[int, Tuple[int, int]], optional): Position of subplot,</span>
<span class="sd">                can be either a integer or a tuple of 2 integers depending on</span>
<span class="sd">                how SetupSubplot was instantiated.</span>
<span class="sd">                Defaults to 0</span>
<span class="sd">            curtailment_name (str, optional): Name of curtailment column.</span>
<span class="sd">                Defaults to &#39;Curtailment&#39;.</span>
<span class="sd">            energy_unit (str, optional): units to add to prop annotation.</span>
<span class="sd">                Defaults to &#39;MW&#39;.</span>
<span class="sd">            re_gen_cat (list, optional): list of re techs, needed to for</span>
<span class="sd">                &#39;Peak RE&#39; property.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            gen_cols (list, optional): list of gen columns, needed for</span>
<span class="sd">                &#39;Peak RE&#39; and &#39;Peak Curtailmnet&#39; property.</span>
<span class="sd">                Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            pd.Timestamp: timstamp of property</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_if_array</span><span class="p">(</span><span class="n">sub_pos</span><span class="p">)</span>

        <span class="c1"># Ensure values are lists</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">re_gen_cat</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">):</span>
            <span class="n">re_gen_cat</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">re_gen_cat</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gen_cols</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">):</span>
            <span class="n">gen_cols</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">gen_cols</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">&quot;Peak Demand&quot;</span><span class="p">:</span>
            <span class="n">x_time_value</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Total Demand&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>
            <span class="n">y_mw_value</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">x_time_value</span><span class="p">,</span> <span class="s2">&quot;Total Demand&quot;</span><span class="p">]</span>
            <span class="n">y_point_value</span> <span class="o">=</span> <span class="n">y_mw_value</span>

        <span class="k">elif</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">&quot;Min Net Load&quot;</span><span class="p">:</span>
            <span class="n">x_time_value</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Net Load&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">idxmin</span><span class="p">()</span>
            <span class="n">y_mw_value</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">x_time_value</span><span class="p">,</span> <span class="s2">&quot;Net Load&quot;</span><span class="p">]</span>
            <span class="n">y_point_value</span> <span class="o">=</span> <span class="n">y_mw_value</span>

        <span class="k">elif</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">&quot;Peak RE&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">re_gen_cat</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;To plot a </span><span class="si">{</span><span class="n">prop</span><span class="si">}</span><span class="s2"> annotation a &quot;</span>
                    <span class="s2">&quot;list of re gen names is required. &quot;</span>
                    <span class="s2">&quot;Pass a list to the add_property_annotation &quot;</span>
                    <span class="s2">&quot;re_gen_cat argument.&quot;</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">gen_cols</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;To plot a </span><span class="si">{</span><span class="n">prop</span><span class="si">}</span><span class="s2"> annotation a &quot;</span>
                    <span class="s2">&quot;list of all generator names is required. &quot;</span>
                    <span class="s2">&quot;Pass a list to the add_property_annotation &quot;</span>
                    <span class="s2">&quot;gen_cols argument.&quot;</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="n">re_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">re_gen_cat</span><span class="p">)]</span>
            <span class="n">re_total</span> <span class="o">=</span> <span class="n">re_df</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">gen_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">gen_cols</span><span class="p">)]</span>
            <span class="k">if</span> <span class="n">curtailment_name</span> <span class="ow">in</span> <span class="n">gen_df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                <span class="n">gen_df</span> <span class="o">=</span> <span class="n">gen_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">curtailment_name</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">x_time_value</span> <span class="o">=</span> <span class="n">re_total</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>
            <span class="n">y_mw_value</span> <span class="o">=</span> <span class="n">re_total</span><span class="p">[</span><span class="n">x_time_value</span><span class="p">]</span>
            <span class="n">y_point_value</span> <span class="o">=</span> <span class="n">gen_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">x_time_value</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

        <span class="k">elif</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">&quot;Peak Unserved Energy&quot;</span><span class="p">:</span>
            <span class="n">x_time_value</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Unserved Energy&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>
            <span class="n">y_mw_value</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">x_time_value</span><span class="p">,</span> <span class="s2">&quot;Unserved Energy&quot;</span><span class="p">]</span>
            <span class="n">y_point_value</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">x_time_value</span><span class="p">,</span> <span class="s2">&quot;Total Demand&quot;</span><span class="p">]</span>

        <span class="k">elif</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">&quot;Peak Curtailment&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">curtailment_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">df</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No Curtailment in dataset&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">gen_cols</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;To plot a </span><span class="si">{</span><span class="n">prop</span><span class="si">}</span><span class="s2"> annotation a &quot;</span>
                    <span class="s2">&quot;list of generator names is required. &quot;</span>
                    <span class="s2">&quot;Pass a list to the add_property_annotation &quot;</span>
                    <span class="s2">&quot;gen_cols argument.&quot;</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="n">curtailment</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">curtailment_name</span><span class="p">]</span>
            <span class="n">gen_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">gen_cols</span><span class="p">)]</span>
            <span class="n">x_time_value</span> <span class="o">=</span> <span class="n">curtailment</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>
            <span class="n">y_mw_value</span> <span class="o">=</span> <span class="n">curtailment</span><span class="p">[</span><span class="n">x_time_value</span><span class="p">]</span>
            <span class="n">y_point_value</span> <span class="o">=</span> <span class="n">gen_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">x_time_value</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

        <span class="k">elif</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">&quot;Peak Reserve Provision&quot;</span><span class="p">:</span>
            <span class="n">peak_re</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">x_time_value</span> <span class="o">=</span> <span class="n">peak_re</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>
            <span class="n">y_mw_value</span> <span class="o">=</span> <span class="n">peak_re</span><span class="p">[</span><span class="n">x_time_value</span><span class="p">]</span>
            <span class="n">y_point_value</span> <span class="o">=</span> <span class="n">y_mw_value</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Property: </span><span class="si">{</span><span class="n">prop</span><span class="si">}</span><span class="s2">, Not Supported!&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prop</span><span class="si">}</span><span class="s2">: </span><span class="se">\n</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="nb">format</span><span class="p">(</span><span class="n">y_mw_value</span><span class="p">,</span> <span class="s1">&#39;.2f&#39;</span><span class="p">))</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">energy_unit</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">x_time_value</span><span class="p">,</span> <span class="n">y_point_value</span><span class="p">),</span>
            <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
            <span class="n">textcoords</span><span class="o">=</span><span class="s2">&quot;axes fraction&quot;</span><span class="p">,</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span>
            <span class="n">arrowprops</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">shrink</span><span class="o">=</span><span class="mf">0.05</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">x_time_value</span></div>

<div class="viewcode-block" id="SetupSubplot.add_main_title"><a class="viewcode-back" href="../../../../references/code/_autosummary/marmot.plottingmodules.plotutils.plot_library.SetupSubplot.html#marmot.plottingmodules.plotutils.plot_library.SetupSubplot.add_main_title">[docs]</a>    <span class="k">def</span> <span class="nf">add_main_title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Adds a title centered above the main figure</span>

<span class="sd">        Wrapper around matplotlib.axes.Axes.set_title</span>

<span class="sd">        Args:</span>
<span class="sd">            label (str): Title of figure.</span>
<span class="sd">            **kwargs</span>
<span class="sd">                These parameters will be passed to matplotlib.axes.Axes.set_title function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="SetupSubplot.set_yaxis_major_tick_format"><a class="viewcode-back" href="../../../../references/code/_autosummary/marmot.plottingmodules.plotutils.plot_library.SetupSubplot.html#marmot.plottingmodules.plotutils.plot_library.SetupSubplot.set_yaxis_major_tick_format">[docs]</a>    <span class="k">def</span> <span class="nf">set_yaxis_major_tick_format</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">tick_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span>
        <span class="n">decimal_accuracy</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">mconfig</span><span class="o">.</span><span class="n">parser</span><span class="p">(</span><span class="s2">&quot;axes_options&quot;</span><span class="p">,</span> <span class="s2">&quot;y_axes_decimalpt&quot;</span><span class="p">),</span>
        <span class="n">sub_pos</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Sets the y axis major tick format of numbers.</span>

<span class="sd">        The decimal point accuracy of the numbers can be further adjusted</span>
<span class="sd">        using the config file &quot;y_axes_decimalpt&quot; input.</span>

<span class="sd">        Args:</span>
<span class="sd">            tick_format (str, optional): Format options.</span>
<span class="sd">                Opinions available are:</span>

<span class="sd">                - standard (1000 values seperated by &#39;,&#39;)</span>
<span class="sd">                - percent (Adds % symbal to axis values)</span>
<span class="sd">                - log</span>

<span class="sd">                Defaults to &#39;standard&#39;.</span>
<span class="sd">            decimal_accuracy (int, optional): Number of decimal</span>
<span class="sd">                points to use.</span>
<span class="sd">                Default set in config file.</span>
<span class="sd">            sub_pos (Union[int, Tuple[int, int]], optional): Position of subplot,</span>
<span class="sd">                can be either a integer or a tuple of 2 integers depending on</span>
<span class="sd">                how SetupSubplot was instantiated.</span>
<span class="sd">                Defaults to 0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_if_array</span><span class="p">(</span><span class="n">sub_pos</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">tick_format</span> <span class="o">==</span> <span class="s2">&quot;standard&quot;</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span>
                <span class="n">mtick</span><span class="o">.</span><span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="nb">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;,.</span><span class="si">{</span><span class="n">decimal_accuracy</span><span class="si">}</span><span class="s2">f&quot;</span><span class="p">))</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">tick_format</span> <span class="o">==</span> <span class="s2">&quot;percent&quot;</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mtick</span><span class="o">.</span><span class="n">PercentFormatter</span><span class="p">(</span><span class="mf">1.0</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">tick_format</span> <span class="o">==</span> <span class="s2">&quot;log&quot;</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;set_yaxis_major_tick_format: &#39;log&#39; Not yet developed&quot;</span><span class="p">)</span>
            <span class="k">pass</span></div>

<div class="viewcode-block" id="SetupSubplot.set_subplot_timeseries_format"><a class="viewcode-back" href="../../../../references/code/_autosummary/marmot.plottingmodules.plotutils.plot_library.SetupSubplot.html#marmot.plottingmodules.plotutils.plot_library.SetupSubplot.set_subplot_timeseries_format">[docs]</a>    <span class="k">def</span> <span class="nf">set_subplot_timeseries_format</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">minticks</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">mconfig</span><span class="o">.</span><span class="n">parser</span><span class="p">(</span><span class="s2">&quot;axes_options&quot;</span><span class="p">,</span> <span class="s2">&quot;x_axes_minticks&quot;</span><span class="p">),</span>
        <span class="n">maxticks</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">mconfig</span><span class="o">.</span><span class="n">parser</span><span class="p">(</span><span class="s2">&quot;axes_options&quot;</span><span class="p">,</span> <span class="s2">&quot;x_axes_maxticks&quot;</span><span class="p">),</span>
        <span class="n">sub_pos</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">zero_formats_1</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;%b</span><span class="se">\n</span><span class="s2"> %Y&quot;</span><span class="p">,</span>
        <span class="n">zero_formats_2</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="se">\n</span><span class="s2"> %b&quot;</span><span class="p">,</span>
        <span class="n">zero_formats_3</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;%H:%M</span><span class="se">\n</span><span class="s2"> </span><span class="si">%d</span><span class="s2">-%b&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Auto sets timeseries format of subplot.</span>

<span class="sd">        Args:</span>
<span class="sd">            minticks (int, optional): Minimum tick marks.</span>
<span class="sd">                Defaults to mconfig.parser(&quot;axes_options&quot;,&quot;x_axes_minticks&quot;).</span>
<span class="sd">            maxticks (int, optional): Max tick marks.</span>
<span class="sd">                Defaults to mconfig.parser(&quot;axes_options&quot;,&quot;x_axes_maxticks&quot;).</span>
<span class="sd">            sub_pos (Union[int, Tuple[int, int]], optional): Position of subplot,</span>
<span class="sd">                can be either a integer or a tuple of 2 integers depending on</span>
<span class="sd">                how SetupSubplot was instantiated.</span>
<span class="sd">                Defaults to 0.</span>
<span class="sd">            zero_formats_1 (str, optional): Sets the zero_fromats[1] format.</span>
<span class="sd">                Defaults to &#39;%b\\n %Y&#39;.</span>
<span class="sd">            zero_formats_2 (str, optional): Sets the zero_formats[2] format.</span>
<span class="sd">                Defaults to &#39;%d\\n %b&#39;.</span>
<span class="sd">            zero_formats_3 (str, optional): Sets the zero_formats[3] format.</span>
<span class="sd">                Defaults to &#39;%H:%M\\n %d-%b&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_if_array</span><span class="p">(</span><span class="n">sub_pos</span><span class="p">)</span>

        <span class="n">locator</span> <span class="o">=</span> <span class="n">mdates</span><span class="o">.</span><span class="n">AutoDateLocator</span><span class="p">(</span><span class="n">minticks</span><span class="o">=</span><span class="n">minticks</span><span class="p">,</span> <span class="n">maxticks</span><span class="o">=</span><span class="n">maxticks</span><span class="p">)</span>
        <span class="n">formatter</span> <span class="o">=</span> <span class="n">mdates</span><span class="o">.</span><span class="n">ConciseDateFormatter</span><span class="p">(</span><span class="n">locator</span><span class="p">)</span>
        <span class="n">formatter</span><span class="o">.</span><span class="n">formats</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="se">\n</span><span class="s2"> %b&quot;</span>
        <span class="n">formatter</span><span class="o">.</span><span class="n">zero_formats</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">zero_formats_1</span>
        <span class="n">formatter</span><span class="o">.</span><span class="n">zero_formats</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">zero_formats_2</span>
        <span class="n">formatter</span><span class="o">.</span><span class="n">zero_formats</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">zero_formats_3</span>
        <span class="n">formatter</span><span class="o">.</span><span class="n">offset_formats</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;%b %Y&quot;</span>
        <span class="n">formatter</span><span class="o">.</span><span class="n">show_offset</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">locator</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span></div>

<div class="viewcode-block" id="SetupSubplot.remove_excess_axs"><a class="viewcode-back" href="../../../../references/code/_autosummary/marmot.plottingmodules.plotutils.plot_library.SetupSubplot.html#marmot.plottingmodules.plotutils.plot_library.SetupSubplot.remove_excess_axs">[docs]</a>    <span class="k">def</span> <span class="nf">remove_excess_axs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">excess_axs</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">grid_size</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes excess axes spins and tick marks.</span>

<span class="sd">        Args:</span>
<span class="sd">            excess_axs (int): # of excess axes.</span>
<span class="sd">            grid_size (int): Size of facet grid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">axs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axs</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">excess_axs</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">axs</span><span class="p">[(</span><span class="n">grid_size</span><span class="p">)</span> <span class="o">-</span> <span class="n">excess_axs</span><span class="p">]</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s2">&quot;right&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">axs</span><span class="p">[(</span><span class="n">grid_size</span><span class="p">)</span> <span class="o">-</span> <span class="n">excess_axs</span><span class="p">]</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s2">&quot;left&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">axs</span><span class="p">[(</span><span class="n">grid_size</span><span class="p">)</span> <span class="o">-</span> <span class="n">excess_axs</span><span class="p">]</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s2">&quot;bottom&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">axs</span><span class="p">[(</span><span class="n">grid_size</span><span class="p">)</span> <span class="o">-</span> <span class="n">excess_axs</span><span class="p">]</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s2">&quot;top&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">axs</span><span class="p">[(</span><span class="n">grid_size</span><span class="p">)</span> <span class="o">-</span> <span class="n">excess_axs</span><span class="p">]</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span>
                <span class="n">axis</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="s2">&quot;white&quot;</span>
            <span class="p">)</span>
            <span class="n">excess_axs</span> <span class="o">-=</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="SetupSubplot.set_barplot_xticklabels"><a class="viewcode-back" href="../../../../references/code/_autosummary/marmot.plottingmodules.plotutils.plot_library.SetupSubplot.html#marmot.plottingmodules.plotutils.plot_library.SetupSubplot.set_barplot_xticklabels">[docs]</a>    <span class="k">def</span> <span class="nf">set_barplot_xticklabels</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">labels</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="n">rotate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">mconfig</span><span class="o">.</span><span class="n">parser</span><span class="p">(</span><span class="s2">&quot;axes_label_options&quot;</span><span class="p">,</span> <span class="s2">&quot;rotate_x_labels&quot;</span><span class="p">),</span>
        <span class="n">num_labels</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">mconfig</span><span class="o">.</span><span class="n">parser</span><span class="p">(</span><span class="s2">&quot;axes_label_options&quot;</span><span class="p">,</span> <span class="s2">&quot;rotate_at_num_labels&quot;</span><span class="p">),</span>
        <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">mconfig</span><span class="o">.</span><span class="n">parser</span><span class="p">(</span><span class="s2">&quot;axes_label_options&quot;</span><span class="p">,</span> <span class="s2">&quot;rotation_angle&quot;</span><span class="p">),</span>
        <span class="n">sub_pos</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Set the xticklabels on bar plots and determine whether they will be rotated.</span>

<span class="sd">        Wrapper around matplotlib.axes.Axes.set_xticklabels</span>

<span class="sd">        Checks to see if the number of labels is greater than or equal </span>
<span class="sd">        to the default number set in config.yml. If this is the case, rotate</span>
<span class="sd">        specify whether or not to rotate the labels and angle specifies </span>
<span class="sd">        what angle they should be rotated to.</span>

<span class="sd">        Args:</span>
<span class="sd">            labels (list): Labels to apply to xticks</span>
<span class="sd">            rotate (bool, optional): rotate labels True/False.</span>
<span class="sd">                Defaults to mconfig.parser(&quot;axes_label_options&quot;, &quot;rotate_x_labels&quot;).</span>
<span class="sd">            num_labels (int, optional): Number of labels to rotate at.</span>
<span class="sd">                Defaults to mconfig.parser(&quot;axes_label_options&quot;, &quot;rotate_at_num_labels&quot;).</span>
<span class="sd">            angle (float, optional): Angle of rotation.</span>
<span class="sd">                Defaults to mconfig.parser(&quot;axes_label_options&quot;, &quot;rotation_angle&quot;).</span>
<span class="sd">            sub_pos (Union[int, Tuple[int, int]], optional): Position of subplot,</span>
<span class="sd">                can be either a integer or a tuple of 2 integers depending on</span>
<span class="sd">                how SetupSubplot was instantiated.</span>
<span class="sd">                Defaults to 0.</span>
<span class="sd">            **kwargs</span>
<span class="sd">                These parameters will be passed to matplotlib.axes.Axes.set_xticklabels </span>
<span class="sd">                function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_if_array</span><span class="p">(</span><span class="n">sub_pos</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">rotate</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">))</span> <span class="o">&gt;=</span> <span class="n">num_labels</span><span class="p">:</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="n">angle</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">textwrap</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">break_long_words</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">]</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">textwrap</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">break_long_words</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">]</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="SetupSubplot.add_facet_labels"><a class="viewcode-back" href="../../../../references/code/_autosummary/marmot.plottingmodules.plotutils.plot_library.SetupSubplot.html#marmot.plottingmodules.plotutils.plot_library.SetupSubplot.add_facet_labels">[docs]</a>    <span class="k">def</span> <span class="nf">add_facet_labels</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">xlabels_bottom</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">xlabels</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">ylabels</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Adds labels to outside of facet plot.</span>

<span class="sd">        Args:</span>
<span class="sd">            xlabels_bottom (bool, optional):</span>
<span class="sd">                If True labels are placed under bottom axis.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            xlabels (list, optional): list of xlabels.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            ylabels (list, optional): list of ylabels.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            **kwargs</span>
<span class="sd">                These parameters will be passed to matplotlib.axes.Axes.set_xlabel </span>
<span class="sd">                and matplotlib.axes.Axes.set_ylabel functions.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axs</span><span class="p">,</span> <span class="n">Axes</span><span class="p">):</span>
            <span class="n">all_axes</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">axs</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">all_axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axs</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
        <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">xlabels</span><span class="p">:</span>
            <span class="n">skip_xlabels</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">skip_xlabels</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">ylabels</span><span class="p">:</span>
            <span class="n">skip_ylabels</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">skip_ylabels</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">all_axes</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_xlabels</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">xlabels_bottom</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">ax</span><span class="o">.</span><span class="n">is_last_row</span><span class="p">():</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span>
                                <span class="n">xlabel</span><span class="o">=</span><span class="p">(</span><span class="n">xlabels</span><span class="p">[</span><span class="n">j</span><span class="p">]),</span>
                                <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
                                <span class="n">fontsize</span><span class="o">=</span><span class="n">font_settings</span><span class="p">[</span><span class="s2">&quot;axes_label_size&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">2</span><span class="p">,</span>
                                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                            <span class="p">)</span>
                        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Warning: xlabel missing for subplot x</span><span class="si">{</span><span class="n">j</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                            <span class="k">pass</span>
                        <span class="n">j</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">ax</span><span class="o">.</span><span class="n">is_first_row</span><span class="p">():</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span>
                                <span class="n">xlabel</span><span class="o">=</span><span class="p">(</span><span class="n">xlabels</span><span class="p">[</span><span class="n">j</span><span class="p">]),</span>
                                <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
                                <span class="n">fontsize</span><span class="o">=</span><span class="n">font_settings</span><span class="p">[</span><span class="s2">&quot;axes_label_size&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">2</span><span class="p">,</span>
                                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                            <span class="p">)</span>
                            <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s2">&quot;top&quot;</span><span class="p">)</span>
                        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Warning: xlabel missing for subplot x</span><span class="si">{</span><span class="n">j</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                            <span class="k">pass</span>
                        <span class="n">j</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_ylabels</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">ax</span><span class="o">.</span><span class="n">is_first_col</span><span class="p">():</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span>
                            <span class="n">ylabel</span><span class="o">=</span><span class="p">(</span><span class="n">ylabels</span><span class="p">[</span><span class="n">k</span><span class="p">]),</span>
                            <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
                            <span class="n">rotation</span><span class="o">=</span><span class="s2">&quot;vertical&quot;</span><span class="p">,</span>
                            <span class="n">fontsize</span><span class="o">=</span><span class="n">font_settings</span><span class="p">[</span><span class="s2">&quot;axes_label_size&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">2</span><span class="p">,</span>
                            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Warning: ylabel missing for subplot y</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="k">pass</span>
                    <span class="n">k</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span></div></div>


<div class="viewcode-block" id="PlotLibrary"><a class="viewcode-back" href="../../../../references/code/_autosummary/marmot.plottingmodules.plotutils.plot_library.PlotLibrary.html#marmot.plottingmodules.plotutils.plot_library.PlotLibrary">[docs]</a><span class="k">class</span> <span class="nc">PlotLibrary</span><span class="p">(</span><span class="n">SetupSubplot</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A library of commonly used plotting methods.</span>

<span class="sd">    Inherits the SetupSubplot class and takes all the</span>
<span class="sd">    same arguments as it.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PlotLibrary.stackplot"><a class="viewcode-back" href="../../../../references/code/_autosummary/marmot.plottingmodules.plotutils.plot_library.PlotLibrary.html#marmot.plottingmodules.plotutils.plot_library.PlotLibrary.stackplot">[docs]</a>    <span class="k">def</span> <span class="nf">stackplot</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
        <span class="n">color_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">sub_pos</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">ytick_major_fmt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates a stacked area plot.</span>

<span class="sd">        Wrapper around matplotlib.stackplot.</span>

<span class="sd">        Args:</span>
<span class="sd">            df (pd.DataFrame): DataFrame of data to plot.</span>
<span class="sd">            color_dict (dict): Colour dictionary, keys should be in data</span>
<span class="sd">                columns.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            ytick_major_fmt (str, optional): Sets the ytick major format.</span>
<span class="sd">                Value gets passed to the set_yaxis_major_tick_format method</span>
<span class="sd">                Defaults to &#39;standard&#39;</span>
<span class="sd">            sub_pos (Union[int, Tuple[int, int]], optional): Position of subplot,</span>
<span class="sd">                can be either a integer or a tuple of 2 integers depending on</span>
<span class="sd">                how SetupSubplot was instantiated.</span>
<span class="sd">                Defaults to 0</span>
<span class="sd">            **kwargs</span>
<span class="sd">                These parameters will be passed to matplotlib.axes.Axes.stackplot </span>
<span class="sd">                function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_if_array</span><span class="p">(</span><span class="n">sub_pos</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">color_dict</span><span class="p">:</span>
            <span class="n">color_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">color_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;#333333&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">color_list</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">stackplot</span><span class="p">(</span>
            <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">color_list</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_yaxis_major_tick_format</span><span class="p">(</span><span class="n">tick_format</span><span class="o">=</span><span class="n">ytick_major_fmt</span><span class="p">,</span> <span class="n">sub_pos</span><span class="o">=</span><span class="n">sub_pos</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">margins</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span></div>
        <span class="c1"># ax.grid(which=&#39;both&#39;, axis=&#39;both&#39;, linewidth=0.5)</span>

<div class="viewcode-block" id="PlotLibrary.barplot"><a class="viewcode-back" href="../../../../references/code/_autosummary/marmot.plottingmodules.plotutils.plot_library.PlotLibrary.html#marmot.plottingmodules.plotutils.plot_library.PlotLibrary.barplot">[docs]</a>    <span class="k">def</span> <span class="nf">barplot</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
        <span class="n">color</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">stacked</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">sub_pos</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">custom_tick_labels</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">ytick_major_fmt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span>
        <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
        <span class="n">linewidth</span><span class="o">=</span><span class="s2">&quot;0.1&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates a bar plot.</span>

<span class="sd">        Wrapper around pandas.plot.bar</span>

<span class="sd">        Args:</span>
<span class="sd">            df (pd.DataFrame): DataFrame of data to plot.</span>
<span class="sd">            color (dict): dictionary of colors, dict keys should be</span>
<span class="sd">                found in df columns.</span>
<span class="sd">            stacked (bool, optional): Whether to stack bar values.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            sub_pos (Union[int, Tuple[int, int]], optional): Position of subplot,</span>
<span class="sd">                can be either a integer or a tuple of 2 integers depending on</span>
<span class="sd">                how SetupSubplot was instantiated.</span>
<span class="sd">                Defaults to 0</span>
<span class="sd">            custom_tick_labels (list, optional): List of custom tick</span>
<span class="sd">                labels to use.</span>
<span class="sd">                Defaults to None</span>
<span class="sd">            ytick_major_fmt (str, optional): Sets the ytick major format.</span>
<span class="sd">                Value gets passed to the set_yaxis_major_tick_format method</span>
<span class="sd">                Defaults to &#39;standard&#39;</span>
<span class="sd">            **kwargs</span>
<span class="sd">                These parameters will be passed to matplotlib.axes.Axes.plot </span>
<span class="sd">                function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_if_array</span><span class="p">(</span><span class="n">sub_pos</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">color_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">color</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;#333333&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">color_list</span> <span class="o">=</span> <span class="n">color</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">color_list</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span>
            <span class="n">stacked</span><span class="o">=</span><span class="n">stacked</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="n">color_list</span><span class="p">,</span>
            <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
            <span class="n">legend</span><span class="o">=</span><span class="n">legend</span><span class="p">,</span>
            <span class="n">edgecolor</span><span class="o">=</span><span class="n">edgecolor</span><span class="p">,</span>
            <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_yaxis_major_tick_format</span><span class="p">(</span><span class="n">tick_format</span><span class="o">=</span><span class="n">ytick_major_fmt</span><span class="p">,</span> <span class="n">sub_pos</span><span class="o">=</span><span class="n">sub_pos</span><span class="p">)</span>

        <span class="c1"># ax.grid(which=&#39;both&#39;, axis=&#39;both&#39;, linewidth=0.5)</span>
        <span class="c1"># Set x-tick labels</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">custom_tick_labels</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">):</span>
            <span class="n">custom_tick_labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">custom_tick_labels</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">custom_tick_labels</span><span class="p">:</span>
            <span class="n">tick_labels</span> <span class="o">=</span> <span class="n">custom_tick_labels</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tick_labels</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_barplot_xticklabels</span><span class="p">(</span><span class="n">tick_labels</span><span class="p">,</span> <span class="n">sub_pos</span><span class="o">=</span><span class="n">sub_pos</span><span class="p">)</span></div>

<div class="viewcode-block" id="PlotLibrary.lineplot"><a class="viewcode-back" href="../../../../references/code/_autosummary/marmot.plottingmodules.plotutils.plot_library.PlotLibrary.html#marmot.plottingmodules.plotutils.plot_library.PlotLibrary.lineplot">[docs]</a>    <span class="k">def</span> <span class="nf">lineplot</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
        <span class="n">column</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">color</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">linestyle</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;solid&quot;</span><span class="p">,</span>
        <span class="n">sub_pos</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">alpha</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">ytick_major_fmt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates a line plot.</span>

<span class="sd">        Wrapper around matplotlib.plot</span>

<span class="sd">        Args:</span>
<span class="sd">            data (pd.Series, pd.DataFrame): Series/ df of data to plot.</span>
<span class="sd">            column (str): If passing df as data column is required.</span>
<span class="sd">            color (dict, str, optional): Color dict or str,</span>
<span class="sd">                if dict color is chosen based on df column</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            linestyle (str, optional): Style of line to plot.</span>
<span class="sd">                Defaults to &#39;solid&#39;.</span>
<span class="sd">            sub_pos (Union[int, Tuple[int, int]], optional): Position of subplot,</span>
<span class="sd">                can be either a integer or a tuple of 2 integers depending on</span>
<span class="sd">                how SetupSubplot was instantiated.</span>
<span class="sd">                Defaults to 0</span>
<span class="sd">            alpha (int, optional): Line opacity.</span>
<span class="sd">                Defaults to 1.</span>
<span class="sd">            ytick_major_fmt (str, optional): Sets the ytick major format.</span>
<span class="sd">                Value gets passed to the set_yaxis_major_tick_format method</span>
<span class="sd">                Defaults to &#39;standard&#39;</span>
<span class="sd">            **kwargs</span>
<span class="sd">                These parameters will be passed to matplotlib.axes.Axes.plot </span>
<span class="sd">                function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_if_array</span><span class="p">(</span><span class="n">sub_pos</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
            <span class="n">plot_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">column</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">plot_data</span> <span class="o">=</span> <span class="n">data</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="p">(</span><span class="nb">dict</span><span class="p">)):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">color</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">plot_data</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;#333333&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">plot_data</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="n">linestyle</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_yaxis_major_tick_format</span><span class="p">(</span><span class="n">tick_format</span><span class="o">=</span><span class="n">ytick_major_fmt</span><span class="p">,</span> <span class="n">sub_pos</span><span class="o">=</span><span class="n">sub_pos</span><span class="p">)</span></div>

<div class="viewcode-block" id="PlotLibrary.histogram"><a class="viewcode-back" href="../../../../references/code/_autosummary/marmot.plottingmodules.plotutils.plot_library.PlotLibrary.html#marmot.plottingmodules.plotutils.plot_library.PlotLibrary.histogram">[docs]</a>    <span class="k">def</span> <span class="nf">histogram</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
        <span class="n">color_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">sub_pos</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates a histogram plot</span>

<span class="sd">        Wrapper around matplotlib.hist</span>

<span class="sd">        Args:</span>
<span class="sd">            df (pd.DataFrame): DataFrame of data to plot.</span>
<span class="sd">            color_dict (dict): Colour dictionary</span>
<span class="sd">            label (list, optional): List of labels for legend.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            sub_pos (Union[int, Tuple[int, int]], optional): Position of subplot,</span>
<span class="sd">                can be either a integer or a tuple of 2 integers depending on</span>
<span class="sd">                how SetupSubplot was instantiated.</span>
<span class="sd">                Defaults to 0</span>
<span class="sd">            **kwargs</span>
<span class="sd">                These parameters will be passed to matplotlib.axes.Axes.hist </span>
<span class="sd">                function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_if_array</span><span class="p">(</span><span class="n">sub_pos</span><span class="p">)</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span>
            <span class="n">df</span><span class="p">,</span>
            <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
            <span class="nb">range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="n">color</span><span class="o">=</span><span class="n">color_dict</span><span class="p">[</span><span class="n">label</span><span class="p">],</span>
            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">rwidth</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="PlotLibrary.clustered_stacked_barplot"><a class="viewcode-back" href="../../../../references/code/_autosummary/marmot.plottingmodules.plotutils.plot_library.PlotLibrary.html#marmot.plottingmodules.plotutils.plot_library.PlotLibrary.clustered_stacked_barplot">[docs]</a>    <span class="k">def</span> <span class="nf">clustered_stacked_barplot</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">df_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">],</span>
        <span class="n">labels</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="n">color_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">H</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;//&quot;</span><span class="p">,</span>
        <span class="n">sub_pos</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">ytick_major_fmt</span><span class="o">=</span><span class="s2">&quot;standard&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates a clustered stacked barplot.</span>

<span class="sd">        Args:</span>
<span class="sd">            df_list (List[pd.DataFrame, pd.DataFrame]): List of Pandas DataFrames</span>
<span class="sd">                The columns within each dataframe will be stacked with different colors.</span>
<span class="sd">                The corresponding columns between each dataframe will be set next to each</span>
<span class="sd">                other and given different hatches.</span>
<span class="sd">            labels (list): A list of strings, usually the scenario names</span>
<span class="sd">            color_dict (dict): Color dictionary, keys should be the same as labels</span>
<span class="sd">            title (str, optional): Optional plot title. Defaults to &quot;&quot;.</span>
<span class="sd">            H (str, optional): Sets the hatch pattern to differentiate dataframe bars.</span>
<span class="sd">                Defaults to &quot;//&quot;.</span>
<span class="sd">            sub_pos (Union[int, Tuple[int, int]], optional): Position of subplot,</span>
<span class="sd">                can be either a integer or a tuple of 2 integers depending on</span>
<span class="sd">                how SetupSubplot was instantiated.</span>
<span class="sd">                Defaults to 0</span>
<span class="sd">            ytick_major_fmt (str, optional): Sets the ytick major format.</span>
<span class="sd">                Value gets passed to the set_yaxis_major_tick_format method</span>
<span class="sd">                Defaults to &#39;standard&#39;</span>
<span class="sd">            **kwargs</span>
<span class="sd">                These parameters will be passed to matplotlib.axes.Axes.plot </span>
<span class="sd">                function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_if_array</span><span class="p">(</span><span class="n">sub_pos</span><span class="p">)</span>

        <span class="n">n_df</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_list</span><span class="p">)</span>
        <span class="n">n_col</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
        <span class="n">n_ind</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>

        <span class="n">column_names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">df</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">df_list</span><span class="p">,</span> <span class="n">labels</span><span class="p">):</span>  <span class="c1"># for each data frame</span>
            <span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
                <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span>
                <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                <span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">grid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="n">color_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;#333333&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="n">label</span><span class="p">]],</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>  <span class="c1"># make bar plots</span>

            <span class="n">column_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>

        <span class="c1"># Unique Column names</span>
        <span class="n">column_names</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">column_names</span><span class="p">))</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

        <span class="n">h</span><span class="p">,</span> <span class="n">l</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()</span>  <span class="c1"># get the handles we want to modify</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n_df</span> <span class="o">*</span> <span class="n">n_col</span><span class="p">,</span> <span class="n">n_col</span><span class="p">):</span>  <span class="c1"># len(h) = n_col * n_df</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">pa</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">h</span><span class="p">[</span><span class="n">i</span> <span class="p">:</span> <span class="n">i</span> <span class="o">+</span> <span class="n">n_col</span><span class="p">]):</span>

                <span class="k">for</span> <span class="n">rect</span> <span class="ow">in</span> <span class="n">pa</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>  <span class="c1"># for each index</span>
                    <span class="n">rect</span><span class="o">.</span><span class="n">set_x</span><span class="p">(</span>
                        <span class="p">(</span><span class="n">rect</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">n_df</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">i</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">n_col</span><span class="p">))</span> <span class="o">-</span> <span class="mf">0.15</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">rect</span><span class="o">.</span><span class="n">set_hatch</span><span class="p">(</span><span class="n">H</span><span class="p">)</span>  <span class="c1"># edited part</span>
                    <span class="n">rect</span><span class="o">.</span><span class="n">set_width</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">n_df</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">n_ind</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">n_df</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span>

        <span class="n">x_labels</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_barplot_xticklabels</span><span class="p">(</span><span class="n">x_labels</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">custom_legend_elements</span><span class="p">(</span><span class="n">label</span><span class="p">):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">color_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="s2">&quot;#333333&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Patch</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>

        <span class="n">handles</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">label_list</span> <span class="o">=</span> <span class="n">labels</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">label_list</span><span class="p">:</span>
            <span class="n">handles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">custom_legend_elements</span><span class="p">(</span><span class="n">label</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">c_name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">column_names</span><span class="p">):</span>
            <span class="n">handles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Patch</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span> <span class="n">hatch</span><span class="o">=</span><span class="n">H</span> <span class="o">*</span> <span class="n">i</span><span class="p">))</span>
            <span class="n">label_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_yaxis_major_tick_format</span><span class="p">(</span><span class="n">tick_format</span><span class="o">=</span><span class="n">ytick_major_fmt</span><span class="p">,</span> <span class="n">sub_pos</span><span class="o">=</span><span class="n">sub_pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_legend</span><span class="p">(</span><span class="n">handles</span><span class="p">,</span> <span class="n">label_list</span><span class="p">)</span></div></div>
</pre></div>

              </article>
              

              
              <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
              </footer>
              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright 2022, Alliance for Sustainable Energy, LLC.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>